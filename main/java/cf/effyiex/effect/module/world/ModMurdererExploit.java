package cf.effyiex.effect.module.world;

import cf.effyiex.effect.command.Command;
import cf.effyiex.effect.module.Module;
import cf.effyiex.effect.module.ModuleType;
import net.minecraft.entity.Entity;
import net.minecraft.entity.player.EntityPlayer;
import net.minecraft.item.ItemSword;
import net.minecraftforge.client.event.GuiScreenEvent.InitGuiEvent;
import net.minecraftforge.fml.common.gameevent.TickEvent.WorldTickEvent;

public class ModMurdererExploit extends Module {

	public ModMurdererExploit() {
		super("MurdererExploit", ModuleType.WORLD);
		this.listenTo(WorldTickEvent.class);
		this.listenTo(InitGuiEvent.class);
	}

	private EntityPlayer murderer;
	
	@Override
	public void onEvent(Object event) {
		if(this.isActive() && event instanceof WorldTickEvent) {
			for(Entity entity : CLIENT.theWorld.getLoadedEntityList()) {
				if(entity instanceof EntityPlayer && murderer != entity) {
					EntityPlayer player = ((EntityPlayer)entity);
					if(player.getHeldItem() != null && player.getHeldItem().getItem() instanceof ItemSword) {
						Command.respond(player.getName() + " is holding a sword!");
						murderer = player;
					}
				}
			}
			
		}else murderer = null;
	}

}
